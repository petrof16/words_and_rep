<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Input New Data</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <nav>
        <div class="nav-container">
            <a href="index.html" class="logo">Words and Standards</a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="input.html">Input New Data</a>
                <a href="search.html">Search</a>
                <a href="everything.html">Everything</a>
                <a href="calendar.html">Calendar</a>
            </div>
        </div>
    </nav>

    <header class="header">
        <h1>Input New Data</h1>
    </header>

    <main>
        <div id="input-container">
            <h2>Add New Word</h2>
            <form id="word-form">
                <input type="text" id="new-word" placeholder="Word" required><br>
                <textarea id="new-definition" placeholder="Definition" required></textarea><br>
                <input type="text" id="new-example" placeholder="Example" required><br>
                <button type="submit">Add Word</button>
            </form>
            <p id="word-confirmation" class="confirmation-message"></p>

            <h2>Add New Standard</h2>
            <form id="standard-form">
                <input type="text" id="new-standard" placeholder="Standard" required><br>
                <input type="text" id="new-composer" placeholder="Composer" required><br>
                <input type="text" id="new-lyricist" placeholder="Lyricist" required><br>
                <input type="text" id="new-year" placeholder="Year"><br>
                <input type="text" id="new-origin" placeholder="Origin"><br>
                <input type="text" id="new-type" placeholder="Type"><br>
                <textarea id="new-notes" placeholder="Notes"></textarea><br>
                <button type="submit">Add Standard</button>
            </form>
            <p id="standard-confirmation" class="confirmation-message"></p>
        </div>
    </main>

    <script src="script.js"></script>
    <script>
        document.getElementById('new-word').addEventListener('input', async function() {
            const word = this.value.trim();
            if (word.length > 0) {
                const response = await fetch(`https://api.dictionaryapi.dev/api/v2/entries/en/${word}`);
                if (response.ok) {
                    const data = await response.json();
                    if (data[0] && data[0].meanings && data[0].meanings[0] && data[0].meanings[0].definitions[0]) {
                        document.getElementById('new-definition').value = data[0].meanings[0].definitions[0].definition;
                    } else {
                        document.getElementById('new-definition').value = '';
                    }
                } else {
                    document.getElementById('new-definition').value = '';
                }
            } else {
                document.getElementById('new-definition').value = '';
            }
        });

        document.getElementById('word-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const newWord = document.getElementById('new-word').value;
            const newDefinition = document.getElementById('new-definition').value;
            const newExample = document.getElementById('new-example').value;

            const wordsData = JSON.parse(localStorage.getItem('wordsData')) || [];
            wordsData.push({ word: newWord, definition: newDefinition, example: newExample });
            localStorage.setItem('wordsData', JSON.stringify(wordsData));

            document.getElementById('word-confirmation').textContent = 'New word added successfully!';
            document.getElementById('word-form').reset();
        });

        document.getElementById('standard-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const newStandard = document.getElementById('new-standard').value;
            const newComposer = document.getElementById('new-composer').value;
            const newLyricist = document.getElementById('new-lyricist').value;
            const newYear = document.getElementById('new-year').value;
            const newOrigin = document.getElementById('new-origin').value;
            const newType = document.getElementById('new-type').value;
            const newNotes = document.getElementById('new-notes').value;

            const standardData = JSON.parse(localStorage.getItem('standardData')) || [];
            standardData.push({ Standard: newStandard, Composer: newComposer, Lyricist: newLyricist, Year: newYear, Origin: newOrigin, Type: newType, Bridge: { notes: newNotes } });
            localStorage.setItem('standardData', JSON.stringify(standardData));

            document.getElementById('standard-confirmation').textContent = 'New standard added successfully!';
            document.getElementById('standard-form').reset();
        });
    </script>
</body>
</html>
